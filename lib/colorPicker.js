!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.colorPicker=e():t.colorPicker=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=163)}({0:function(t,e){t.exports=function(t,e,o,i,n,s){var r,c=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(r=t,c=t.default);var l,f="function"==typeof c?c.options:c;if(e&&(f.render=e.render,f.staticRenderFns=e.staticRenderFns,f._compiled=!0),o&&(f.functional=!0),n&&(f._scopeId=n),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},f._ssrRegister=l):i&&(l=i),l){var u=f.functional,h=u?f.render:f.beforeCreate;u?(f._injectStyles=l,f.render=function(t,e){return l.call(e),h(t,e)}):f.beforeCreate=h?[].concat(h,l):[l]}return{esModule:r,exports:c,options:f}}},109:function(t,e,o){"use strict";var i=o(6);e.a={name:"xinColorPicker",components:{"xin-icon":i.default},props:{value:{type:[String,Date,Object],default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},model:{type:String,default:""}},data:function(){return{visible:!1,innerValue:"",boxInfo:{width:280,height:180,el:null,ctx:null,color:"red"},barInfo:{width:280,height:10,el:null,ctx:null},boxPickers:{status:!1,top:0,left:0,color:"#ffffff"},barPickers:{status:!1,left:0},curentPickers:""}},computed:{},watch:{value:function(t,e){this.innerValue=t,this.boxPickers.color=t}},mounted:function(){this.innerValue=this.value,this.boxPickers.color=this.value,this.init(),this.renderBox(this.boxInfo.color),this.renderBar()},methods:{init:function(){this.boxInfo.el=this.$refs.box,this.boxInfo.ctx=this.boxInfo.el.getContext("2d"),this.barInfo.el=this.$refs.bar,this.barInfo.ctx=this.barInfo.el.getContext("2d"),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1)},renderBox:function(t){var e=this.boxInfo.ctx.createLinearGradient(0,0,this.boxInfo.width,0);e.addColorStop(0,"white"),e.addColorStop(1,this.boxInfo.color),this.boxInfo.ctx.fillStyle=e,this.boxInfo.ctx.fillRect(0,0,this.boxInfo.width,this.boxInfo.height);var o=this.boxInfo.ctx.createLinearGradient(0,0,0,this.boxInfo.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"black"),this.boxInfo.ctx.fillStyle=o,this.boxInfo.ctx.fillRect(0,0,this.boxInfo.width,this.boxInfo.height);var i=this.getPointColor({x:this.boxPickers.left,y:this.boxPickers.top},"box");this.boxPickers.color="#"+this.conversion16(i.r)+this.conversion16(i.g)+this.conversion16(i.b)},renderBar:function(){var t=this.barInfo.ctx.createLinearGradient(0,0,this.barInfo.width,0);t.addColorStop(0,"#f00"),t.addColorStop(1/6,"#f0f"),t.addColorStop(2/6,"#00f"),t.addColorStop(.5,"#0ff"),t.addColorStop(4/6,"#0f0"),t.addColorStop(5/6,"#ff0"),t.addColorStop(1,"#f00"),this.barInfo.ctx.fillStyle=t,this.barInfo.ctx.fillRect(0,0,this.barInfo.width,this.barInfo.height)},mousedown:function(t,e){if(this.curentPickers=e,"box"===e){var o=this.$refs.box.getBoundingClientRect();this.boxPickers.status=!0,this.boxPickers.top=t.clientY-o.top,this.boxPickers.left=t.clientX-o.left}else{var i=this.$refs.bar.getBoundingClientRect();this.barPickers.status=!0,this.barPickers.left=t.clientX-i.left}},mousemove:function(t){if(this.curentPickers&&this.boxPickers.status){if(!this.boxPickers.status)return;var e=this.$refs.box.getBoundingClientRect(),o=parseInt(t.clientX-e.left),i=parseInt(t.clientY-e.top);this.boxPickers.top=Math.abs(i<0?0:i>this.boxInfo.height-1?this.boxInfo.height-1:i),this.boxPickers.left=Math.abs(o<0?0:o>this.boxInfo.width-1?this.boxInfo.width-1:o);var n=this.getPointColor({x:this.boxPickers.left,y:this.boxPickers.top},"box");this.boxPickers.color="#"+this.conversion16(n.r)+this.conversion16(n.g)+this.conversion16(n.b)}else if(this.curentPickers&&this.barPickers.status){if(!this.barPickers.status)return;var s=this.$refs.box.getBoundingClientRect(),r=parseInt(t.clientX-s.left);this.barPickers.left=Math.abs(r<0?0:r>this.barInfo.width-1?this.barInfo.width-1:r);var c=this.getPointColor({x:this.barPickers.left,y:5},"bar");this.boxInfo.color="#"+this.conversion16(c.r)+this.conversion16(c.g)+this.conversion16(c.b),this.renderBox()}},getPointColor:function(t,e){var o=null;"box"===e?o=this.boxInfo.ctx.getImageData(0,0,this.boxInfo.width,this.boxInfo.height):"bar"===e&&(o=this.barInfo.ctx.getImageData(0,0,this.barInfo.width,this.barInfo.height));var i=o.data,n=4*(o.width*t.y+t.x);return{r:i[n+0],g:i[n+1],b:i[n+2],a:i[n+3]}},changeColor:function(){this.boxPickers.left,this.boxPickers.top},mouseup:function(t){this.boxPickers.status=!1,this.barPickers.status=!1,this.curentPickers=""},conversion16:function(t){return(t=(t=Number(t)).toString(16)).length>1?t:"0"+t},conversion10:function(t){return t=String(t),parseInt(t,16)},coverEvent:function(){this.visible=!1},cancel:function(){this.coverEvent()},sure:function(){this.coverEvent(),this.$emit("input",this.boxPickers.color),this.$emit("change",this.boxPickers.color)}}}},11:function(t,e,o){"use strict";e.a={name:"xinIcon",components:{},props:{type:{type:String,default:"unicode"},name:{type:String,default:""}},data:function(){return{}},watch:{},mounted:function(){},methods:{}}},163:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(164);i.a.install=function(t){t.component(i.a.name,i.a)},e.default=i.a},164:function(t,e,o){"use strict";var i=o(109),n=o(165),s=o(0)(i.a,n.a,!1,null,null,null);e.a=s.exports},165:function(t,e,o){"use strict";var i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:["xin-color-picker",{}]},[o("div",{class:["xin-color-picker-input"],on:{click:function(e){t.visible=!0}}},[o("span",{staticClass:"color-picker-color",style:{background:this.innerValue}}),t._v(" "),o("div",{staticClass:"color-picker-icon"},[o("xin-icon",{class:{rotate:t.visible},attrs:{name:"arrow-down"}})],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"xin-color-picker-cover",on:{click:function(e){return e.stopPropagation(),t.coverEvent()}}}),t._v(" "),o("transition",{attrs:{name:"xin-date-picker"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"xin-color-picker-options"},[o("div",{staticClass:"color-picker-options-content"},[o("div",{staticClass:"content-picker",on:{mousedown:function(e){return t.mousedown(e,"box")}}},[o("canvas",{ref:"box",attrs:{width:t.boxInfo.width,height:t.boxInfo.height}}),t._v(" "),o("div",{staticClass:"box-pickers",style:{top:t.boxPickers.top+"px",left:t.boxPickers.left+"px"}},[o("div",{staticClass:"pickers-box"},[o("div",{staticClass:"dot"}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.boxPickers.status,expression:"boxPickers.status"}],staticClass:"dot-border",style:{"border-color":t.boxPickers.color}})])])]),t._v(" "),o("div",{staticClass:"content-picker content-line"},[o("canvas",{ref:"bar",attrs:{width:t.barInfo.width,height:t.barInfo.height}}),t._v(" "),o("div",{staticClass:"bar-pickers",style:{left:t.barPickers.left+"px"},on:{mousedown:function(e){return t.mousedown(e,"bar")}}})]),t._v(" "),o("div",{staticClass:"content-bottom"},[o("div",{staticClass:"colors",style:{background:t.boxPickers.color}}),t._v(" "),o("xin-input",{staticClass:"input",model:{value:t.boxPickers.color,callback:function(e){t.$set(t.boxPickers,"color",e)},expression:"boxPickers.color"}}),t._v(" "),o("xin-button",{attrs:{inline:""},on:{click:function(e){return t.cancel()}}},[t._v("取消")]),t._v(" "),o("xin-button",{attrs:{fill:"",color:"info"},on:{click:function(e){return t.sure()}}},[t._v("确定")])],1)])])])],1)},staticRenderFns:[]};e.a=i},26:function(t,e,o){"use strict";var i=o(11),n=o(27),s=o(0)(i.a,n.a,!1,null,null,null);e.a=s.exports},27:function(t,e,o){"use strict";var i={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:["xin-iconfont",this.name]})},staticRenderFns:[]};e.a=i},6:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(26);i.a.install=function(t){t.component(i.a.name,i.a)},e.default=i.a}})});